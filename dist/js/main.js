function contactsMapInit(){var e={zoom:14,center:new google.maps.LatLng(55.7554235,37.6610504),mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,draggable:!1,scrollwheel:!1};map=new google.maps.Map(document.getElementById("contacts-map"),e),image="img/static/crown.png",beachMarker=new google.maps.Marker({position:{lat:55.7566,lng:37.6612},map:map,icon:image})}$(function(){"use strict";function e(e,a){var t="";switch(a){case"all":t="modals/cases-gallery-all.html";break;case"photo":t="modals/cases-gallery-all.html";break;case"video":t="modals/cases-gallery-video.html"}$.ajax({url:t,dataType:"html",error:function(){console.warn("Проблема в получении данных для галереи")},success:function(a){$(e).find(".modal-content").html(a),renderIcons(),$(e).modal({backdropClass:"modal-backdrop is-cases-modal-backdrop"}).modal("handleUpdate")}})}function a(e){$.ajax({url:"modals/reviews.html",dataType:"html",error:function(){console.warn("Проблема в получении данных для модального окна")},success:function(a){$(e).find(".modal-content").html(a),renderIcons(),$(e).modal({backdropClass:"modal-backdrop is-reviews-modal-backdrop"}).modal("handleUpdate")}})}function t(e,a){var t="";switch(a){case"#calc-form":t="modals/calc-form.html";break;case"#request-form":t="modals/request-form.html";break;case"#callback-form":t="modals/callback-form.html";break;case"#price-info":t="modals/price-info.html";break;case"#thank-notify":t="modals/thank-notify.html"}$.ajax({url:t,dataType:"html",error:function(){console.warn("Проблема в получении данных для галереи")},success:function(a){$(e).find(".modal-content").html(a),renderIcons(),$(e).modal({backdropClass:"modal-backdrop is-callback-backdrop"})}})}function l(e){e.on("click",".gallery-prev-btn",function(e){e.preventDefault();var a=$(this).closest(".modal-content").find(".flickity-enabled").data("flickity");a.previous(!0)}).on("click",".gallery-next-btn",function(e){e.preventDefault();var a=$(this).closest(".modal-content").find(".flickity-enabled").data("flickity");a.next(!0)})}FastClick.attach(document.body),$('[data-type="review-gallery"], [data-type="clients-gallery"], [data-type="cases-gallery"], [data-type="clients-gallery"], [data-type="mobile-clients-gallery"]').flickity({pageDots:!1,prevNextButtons:!1,wrapAround:!0}),$(".block.is-reviews, .block.is-clients, .block.is-cases-videos, .block.is-cases-photos, .block.is-clients-photos").on("click",'[data-type="gallery-prev-handler"], [data-type="gallery-next-handler"]',function(e){e.preventDefault();var a=$(this).closest(".block").find(".flickity-enabled").data("flickity");switch($(this).data("type")){case"gallery-prev-handler":a.previous(!0);break;case"gallery-next-handler":a.next(!0)}}),$(".mobile-nav-handler").on("click",function(){var e=$(this).data("target");$(this).toggleClass("active"),$(e).modal({show:!1,backdropClass:"modal-backdrop is-mobile-nav-modal-backdrop"}).modal("toggle")}),$(".js-cases-blocks").on("click",".block",function(a){a.preventDefault();var t=$(this).data("target"),l=$(this).closest(".js-cases-blocks").find(".block").index($(this)),s=$(this).data("modal-type");$(t).data("flickityShowID",l),e($(t),s)}),$(document).on("shown.bs.modal",function(e){var a=$(e.target).data("flickityShowID");$(e.target).hasClass("cases-modal")?$(e.target).find(".cases-gallery").flickity({initialIndex:a,prevNextButtons:!1,pageDots:!1}):$(e.target).hasClass("reviews-modal")&&$(e.target).find(".reviews-modal-gallery").flickity({initialIndex:a,prevNextButtons:!1,pageDots:!1}),l($(e.target))}).on("shown.bs.modal",function(e){$(e.target).modal("handleUpdate")}),$(".js-clients-blocks").on("click",'[data-toggle="review-modal"]',function(e){e.preventDefault();var t=$(this).attr("href"),l=$(this).closest(".js-clients-blocks").find(".review-modal-link").index($(this).closest(".review-modal-link"));$(t).data("flickityShowID",l),a($(t))}),$('[data-toggle="collapsible-section"]').on("click",function(e){e.preventDefault();var a=$(this).closest(".tab-content").index($(this).closest(".tab-pane"));$(this).hasClass("active")?($(this).removeClass("active").next(".collapse").collapse("hide"),$(this).closest(".tab-pane").addClass("in active"),-1!==a&&$(".videos-nav").find("li").removeClass("active").get(a).addClass("active")):($(".inner-fullsize-context").find(".collapse").collapse("hide").end().find('[data-toggle="collapsible-section"].active').removeClass("active"),$(this).addClass("active").next(".collapse").collapse("show"),$(this).closest(".tab-pane").removeClass("in active"),-1!==a&&$(".videos-nav").find("li").removeClass("active").get(a).addClass("active"),$(this).closest(".tab-pane").find(".flickity-enabled").flickity("resize"))}),$('[data-toggle="modal-callback"]').on("click",function(e){e.preventDefault();var a=$(this).attr("href"),l=$("#callback-modal");$("#mobile-nav-modal").modal("hide"),$(".mobile-nav-handler").removeClass("active"),t(l,a)}),$(".js-cases-blocks, .js-clients-blocks").isotope({itemSelector:".block"}),$(".js-cases-grid-sort, .js-clients-grid-sort").on("click","a[data-sort]",function(e){var a=$(this).data("sort");e.preventDefault(),$(this).closest("ul").find("li").removeClass("active").end().end().closest("li").addClass("active"),$(".js-cases-blocks, .js-clients-blocks").isotope({filter:a})}),setTimeout(function(){$(".js-cases-blocks, .js-clients-blocks").isotope("layout")},100)});var map,image,beachMarker;"undefined"!=typeof google&&(google.maps.event.addDomListener(window,"load",contactsMapInit),google.maps.event.addDomListener(window,"resize",function(){var e=map.getCenter();google.maps.event.trigger(map,"resize"),map.setCenter(e)}));